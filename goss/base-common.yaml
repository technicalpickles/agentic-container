command:
  "dumb-init --version":
    exit-status: 0
    stdout: [ /\d+\.\d+/ ]
  "sudo --version":
    exit-status: 0
    stdout: [ "Sudo version" ]
  # Git configuration tests (verify config is loaded properly)
  "git config --list | grep 'init.defaultbranch=main'":
    exit-status: 0
  "git config --list | grep 'pull.rebase=false'":
    exit-status: 0
  "git config --list | grep 'core.autocrlf=input'":
    exit-status: 0
  "git config --list | grep 'safe.directory=/workspace'":
    exit-status: 0
  "git config --list | grep 'safe.directory=\\*'":
    exit-status: 0

file:
  /usr/local/bin/mise:
    exists: true
    filetype: file
    mode: "0755"
  /usr/local/bin/rv:
    exists: true
    filetype: file
    mode: "0755"
  /usr/local/bin/starship:
    exists: true
    filetype: file
    mode: "0755"
  # Git configuration file
  /etc/gitconfig:
    exists: true
    filetype: file
    mode: "0644"
    contents:
      - "defaultBranch = main"
      - "rebase = false" 
      - "autocrlf = input"
      - "directory = /workspace"

env:
  # Intentionally left empty; base-common avoids brittle env checks


